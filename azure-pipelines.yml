# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

pool:
  vmImage: 'Ubuntu 16.04'

steps:
- script: echo does the web hook work, another one
  displayName: 'Run a one-line script'
  
# Invoke REST API
# Invoke a REST API as a part of your pipeline.
- task: InvokeRESTAPI@1
  inputs:
    baseUrl: 'https://eversourcetest.service-now.com/api/now/v1/table/incident/16d04292db856f006f9b6f13ca961982'
    #connectionType: 'connectedServiceName' # Options: connectedServiceName, connectedServiceNameARM
    #serviceConnection: # Required when connectionType == ConnectedServiceName
    #azureServiceConnection: # Required when connectionType == ConnectedServiceNameARM
    method: 'PUT' # Options: oPTIONS, gET, hEAD, pOST, pUT, dELETE, tRACE, pATCH
    headers: '{Content-Type:application/json, Accept:application/json}' 
    body: '{"short_description":"Test Server is down", "comments":"From Azure Devops Pipeline", "urgency": "2"}'
    #urlSuffix: # Optional
    waitForCompletion: 'true' # Options: true, false
    #successCriteria: # Optional
